<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediCare Blockchain - Update Access</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            color: #333;
        }
        
        header {
            padding: 20px 0;
            border-bottom: 1px solid #eaeaea;
        }
        
        .container {
            width: 85%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #0a9396;
            text-decoration: none;
        }
        
        .nav-links {
            display: flex;
            gap: 30px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: #333;
        }
        
        .nav-links a.active {
            color: #0a9396;
            border-bottom: 2px solid #0a9396;
        }
        
        .connect-btn {
            background-color: #0a9396;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
        }
        
        .banner {
            background-color: #0082c8;
            color: white;
            padding: 50px 0;
            text-align: center;
        }
        
        .banner h1 {
            margin-bottom: 20px;
            font-size: 2.5rem;
        }
        
        .banner p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
        }
        
        .main-content {
            padding: 50px 0;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        input, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .btn {
            background-color: #0a9396;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            display: inline-block;
        }
        
        .btn-secondary {
            background-color: transparent;
            border: 1px solid #0a9396;
            color: #0a9396;
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checkbox-group input {
            width: auto;
        }
        
        .doctor-entry {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }
        
        .doctor-entry input {
            flex-grow: 1;
        }
        
        .doctor-entry .btn {
            padding: 8px 12px;
        }
        
        .add-doctor-btn {
            display: flex;
            align-items: center;
            gap: 5px;
            background: none;
            border: none;
            color: #0a9396;
            cursor: pointer;
            font-size: 16px;
            padding: 0;
            margin-top: 10px;
        }
        
        .info-text {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 25px;
            font-size: 14px;
        }
        
        .action-result {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            border-radius: 4px;
            display: none;
        }
        
        .action-result.success {
            background-color: #e8f8e8;
            color: #2c762c;
            display: block;
        }
        
        .action-result.error {
            background-color: #f8e8e8;
            color: #762c2c;
            display: block;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="navbar">
                <a href="#" class="logo">MediCare Blockchain</a>
                <div class="nav-links">
                    <a href="#">Home</a>
                    <a href="#" class="active">Services</a>
                    <a href="#">Blockchain Health</a>
                </div>
                <button class="connect-btn">Connect</button>
            </div>
        </div>
    </header>
    
    <div class="banner">
        <div class="container">
            <h1>Update Medical Record Access</h1>
            <p>Securely manage which healthcare providers can access your medical records on the blockchain</p>
        </div>
    </div>
    
    <div class="main-content">
        <div class="container">
            <div class="card">
                <div class="info-text">
                    This page allows you to update access permissions for your electronic health records (EHR) stored on the blockchain. Enter your transaction hash (txHash) and the addresses of doctors you wish to grant access to.
                </div>
                
                <form id="updateAccessForm">
                    <div class="form-group">
                        <label for="txHash">Transaction Hash (txHash):</label>
                        <input type="text" id="txHash" name="txHash" placeholder="0x..." required>
                    </div>
                    
                    <div class="form-group">
                        <label>Doctor Addresses:</label>
                        <div id="doctorAddresses">
                            <div class="doctor-entry">
                                <input type="text" name="doctorAddress" placeholder="0x..." required>
                                <button type="button" class="btn" onclick="removeDoctor(this)">Remove</button>
                            </div>
                        </div>
                        <button type="button" class="add-doctor-btn" onclick="addDoctor()">
                            <span>+</span> Add Another Doctor
                        </button>
                    </div>
                    
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="confirmCheck" required>
                        <label for="confirmCheck">I confirm that I am authorizing these doctors to access my medical records</label>
                    </div>
                    
                    <div class="btn-group">
                        <button type="button" class="btn btn-secondary" onclick="resetForm()">Reset</button>
                        <button type="submit" class="btn">Update Access</button>
                    </div>
                </form>
                
                <div id="actionResult" class="action-result"></div>
            </div>
        </div>
    </div>
    
    <script>
        function addDoctor() {
            const container = document.getElementById('doctorAddresses');
            const newEntry = document.createElement('div');
            newEntry.className = 'doctor-entry';
            newEntry.innerHTML = `
                <input type="text" name="doctorAddress" placeholder="0x..." required>
                <button type="button" class="btn" onclick="removeDoctor(this)">Remove</button>
            `;
            container.appendChild(newEntry);
        }
        
        function removeDoctor(button) {
            const entries = document.querySelectorAll('.doctor-entry');
            if (entries.length > 1) {
                button.closest('.doctor-entry').remove();
            }
        }
        
        function resetForm() {
            document.getElementById('updateAccessForm').reset();
            const container = document.getElementById('doctorAddresses');
            const entries = container.querySelectorAll('.doctor-entry');
            
            // Keep only the first entry and clear its value
            if (entries.length > 0) {
                entries[0].querySelector('input').value = '';
                for (let i = 1; i < entries.length; i++) {
                    entries[i].remove();
                }
            }
            
            document.getElementById('actionResult').className = 'action-result';
            document.getElementById('actionResult').textContent = '';
        }
        
        document.getElementById('updateAccessForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const txHash = document.getElementById('txHash').value;
            const doctorInputs = document.querySelectorAll('input[name="doctorAddress"]');
            const doctorAddresses = [];
            
            doctorInputs.forEach(input => {
                if (input.value.trim()) {
                    doctorAddresses.push(input.value.trim());
                }
            });
            
            // Validate input (basic validation)
            if (!txHash.startsWith('0x') || txHash.length < 10) {
                showError('Please enter a valid transaction hash');
                return;
            }
            
            if (doctorAddresses.length === 0) {
                showError('Please enter at least one doctor address');
                return;
            }
            
            // In a real application, this would call a blockchain function
            // For demo purposes, we'll just show a success message
            showSuccess('Access permissions updated successfully! Transaction submitted to the blockchain.');
            
            console.log({
                txHash: txHash,
                doctorAddresses: doctorAddresses
            });
        });
        
        function showError(message) {
            const resultElement = document.getElementById('actionResult');
            resultElement.textContent = message;
            resultElement.className = 'action-result error';
        }
        
        function showSuccess(message) {
            const resultElement = document.getElementById('actionResult');
            resultElement.textContent = message;
            resultElement.className = 'action-result success';
        }
    </script>
</body>
</html>